  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  png(paste0("map",i,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
library(ggmap)
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
# For updating only the last n maps
# Check the number of days
length(time.pred[1,])
# Extract the last n maps
for (i in 35:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  png(paste0("map",i,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
library(ggmap)
#register_google(key = "AIzaSyDy1-nDeU7Keb6IMGfsO2SSZDDhgoYbdsI")
#map=qmap(c(4.55, 46.1),zoom=5,maptype="satellite")
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
length(time.pred[1,])
for (i in 37:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  png(paste0("map",i,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
warnings()
library(ggmap)
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
length(time.pred[1,])
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
length(time.pred[1,])
for (i in 39:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  png(paste0("map",i,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
library(ggmap)
#register_google(key = "AIzaSyDy1-nDeU7Keb6IMGfsO2SSZDDhgoYbdsI")
#map=qmap(c(4.55, 46.1),zoom=5,maptype="satellite")
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
# For updating only the last n maps
# Check the number of days
length(time.pred[1,])
length(time.pred[1,])
# Extract the last n maps
for (i in 41:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  png(paste0("map",i,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
library(ggmap)
#register_google(key = "AIzaSyDy1-nDeU7Keb6IMGfsO2SSZDDhgoYbdsI")
#map=qmap(c(4.55, 46.1),zoom=5,maptype="satellite")
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
length(time.pred[1,])
# Extract the last n maps
for (i in 43:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  png(paste0("map",i,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
library(ggmap)
#register_google(key = "AIzaSyDy1-nDeU7Keb6IMGfsO2SSZDDhgoYbdsI")
#map=qmap(c(4.55, 46.1),zoom=5,maptype="satellite")
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
length(time.pred[1,])
for (i in 43:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  png(paste0("map",i,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
dy
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
for (i in 1:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  png(paste0("map",i,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
library(ggmap)
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
for (i in 1:9) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  png(paste0("map0",i,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
library(ggmap)
#register_google(key = "AIzaSyDy1-nDeU7Keb6IMGfsO2SSZDDhgoYbdsI")
#map=qmap(c(4.55, 46.1),zoom=5,maptype="satellite")
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
length(time.pred[1,])
# Extract the last n maps
for (i in 1:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  png(paste0("map",i,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
library(ggmap)
#register_google(key = "AIzaSyDy1-nDeU7Keb6IMGfsO2SSZDDhgoYbdsI")
#map=qmap(c(4.55, 46.1),zoom=5,maptype="satellite")
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
# For updating only the last n maps
# Check the number of days
length(time.pred[1,])
# Extract the last n maps
for (i in 1:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  png(paste0("map",i,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
warnings()
library(ggmap)
#register_google(key = "AIzaSyDy1-nDeU7Keb6IMGfsO2SSZDDhgoYbdsI")
#map=qmap(c(4.55, 46.1),zoom=5,maptype="satellite")
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
length(time.pred[1,])
for (i in 1:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  png(paste0("map",(i+43),"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
warnings()
library(ggmap)
#register_google(key = "AIzaSyDy1-nDeU7Keb6IMGfsO2SSZDDhgoYbdsI")
#map=qmap(c(4.55, 46.1),zoom=5,maptype="satellite")
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
length(time.pred[1,])
# Extract the last n maps
for (i in 1:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  png(paste0("map",i+44,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
library(ggmap)
#register_google(key = "AIzaSyDy1-nDeU7Keb6IMGfsO2SSZDDhgoYbdsI")
#map=qmap(c(4.55, 46.1),zoom=5,maptype="satellite")
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
length(time.pred[1,])
for (i in 1:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  png(paste0("map",i+44,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
use warnings()
warnings()
library(ggmap)
#register_google(key = "AIzaSyDy1-nDeU7Keb6IMGfsO2SSZDDhgoYbdsI")
#map=qmap(c(4.55, 46.1),zoom=5,maptype="satellite")
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
length(time.pred[1,])
for (i in 1:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  png(paste0("map",i+44,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
for (i in 1:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  png(paste0("map",i+61,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
library(ggmap)
#register_google(key = "AIzaSyDy1-nDeU7Keb6IMGfsO2SSZDDhgoYbdsI")
#map=qmap(c(4.55, 46.1),zoom=5,maptype="satellite")
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
length(time.pred[1,])
length(time.pred[1,])for (i in 1:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  png(paste0("map",i+66,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
for (i in 1:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  png(paste0("map",i+66,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
library(ggmap)
#register_google(key = "AIzaSyDy1-nDeU7Keb6IMGfsO2SSZDDhgoYbdsI")
#map=qmap(c(4.55, 46.1),zoom=5,maptype="satellite")
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
length(time.pred[1,])
# Extract the last n maps
for (i in 1:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  # Start from 73 so is i+72
  png(paste0("map",i+72,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
library(ggmap)
#register_google(key = "AIzaSyDy1-nDeU7Keb6IMGfsO2SSZDDhgoYbdsI")
#map=qmap(c(4.55, 46.1),zoom=5,maptype="satellite")
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
length(time.pred[1,])
for (i in 1:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  # Start from 80 so is i+79
  png(paste0("map",i+79,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
# Extract the last n maps
for (i in 1:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  # Start from 80 so is i+79
  png(paste0("map",i+79,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
warnings()
library(ggmap)
#register_google(key = "AIzaSyDy1-nDeU7Keb6IMGfsO2SSZDDhgoYbdsI")
#map=qmap(c(4.55, 46.1),zoom=5,maptype="satellite")
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
length(time.pred[1,])
# Extract the last n maps
for (i in 1:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  # Start from 104 so is i+103
  png(paste0("map",i+103,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
library(ggmap)
#register_google(key = "AIzaSyDy1-nDeU7Keb6IMGfsO2SSZDDhgoYbdsI")
#map=qmap(c(4.55, 46.1),zoom=5,maptype="satellite")
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
length(time.pred[1,])
# For updating only the last n maps
# Check the number of days
length(time.pred[1,])
# Extract the last n maps
for (i in 1:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  # Start from 124 so is i+123
  png(paste0("map",i+123,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
library(ggmap)
#register_google(key = "AIzaSyDy1-nDeU7Keb6IMGfsO2SSZDDhgoYbdsI")
#map=qmap(c(4.55, 46.1),zoom=5,maptype="satellite")
load("../time.Rda")
load("../latlongProv.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
length(time.pred[1,])
# Extract the last n maps
for (i in 1:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  # Start from 124 so is i+123
  png(paste0("map",i+123,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
library(ggmap)
#register_google(key = "AIzaSyDy1-nDeU7Keb6IMGfsO2SSZDDhgoYbdsI")
#map=qmap(c(4.55, 46.1),zoom=5,maptype="satellite")
load("../time.Rda")
load("../latlongProv.Rda")
load("../first.Rda")
load("../last.Rda")
load("../deltaDays.Rda")
selProv=latlongProv[order(latlongProv$denominazione_provincia),]
test=cbind(time.pred,selProv)
length(time.pred[1,])
first
i+first-1
i
# Extract the last n maps
for (i in 1:length(time.pred[1,])) {
  testm=test[which(test[,i]>=10 & test[,i]<25),]
  testh=test[which(test[,i]>=25),]
  testl=test[which(test[,i]<10),]
  gph=geom_point(testh,mapping=aes(x=testh$long,y=testh$lat,size=testh[,i]),alpha=0.9,colour="#FF3300",show.legend = FALSE)
  gpm=geom_point(testm,mapping=aes(x=testm$long,y=testm$lat,size=testm[,i]),alpha=0.9,colour="#FFFF00",show.legend = FALSE)
  gpl=geom_point(testl,mapping=aes(x=testl$long,y=testl$lat,size=testl[,i]),alpha=0.9,colour="#33FF00",show.legend = FALSE)
  # Start from first so is i+(first-1)
  png(paste0("map",i+first-1,"_",last,"_",deltaDays,".png"))
  print(map+gph+gpm+gpl+ggtitle(colnames(time.pred)[i]))
  dev.off()
}
warnings()
i
